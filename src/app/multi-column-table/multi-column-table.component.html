<div class="card">
  <p-table
    [value]="customers"
    sortField="representative.name"
    sortMode="single"
    dataKey="representative.name"
    rowGroupMode="subheader"
    groupRowsBy="representative.name"
    [tableStyle]="{ 'min-width': '70rem' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 20%">Name</th>
        <th style="width: 20%">Country</th>
        <th style="width: 20%">Company</th>
        <th style="width: 20%">Status</th>
        <th style="width: 20%">Date</th>
      </tr>
    </ng-template>
    <ng-template
      pTemplate="groupheader"
      let-customer
      let-rowIndex="rowIndex"
      let-expanded="expanded"
    >
      <tr>
        <td colspan="5">
          <button
            type="button"
            pButton
            pRipple
            [pRowToggler]="customer"
            class="p-button-text p-button-rounded p-button-plain mr-2"
            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
          ></button>
          <img
            [alt]="customer.representative.name"
            src="https://primefaces.org/cdn/primeng/images/demo/avatar/{{
              customer.representative.image
            }}"
            width="32"
            style="vertical-align: middle"
          />
          <span class="font-bold ml-2">{{ customer.representative.name }}</span>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="rowexpansion" let-customer>
      <tr>
        <td>
          {{ customer.name }}
        </td>
        <td>
          <img
            src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
            [class]="'flag flag-' + customer.country.code"
            style="width: 20px"
          />
          <span class="ml-1 vertical-align-middle">{{
            customer.country.name
          }}</span>
        </td>
        <td>
          {{ customer.company }}
        </td>
        <td>
          <p-tag
            [value]="customer.status"
            [severity]="getSeverity(customer.status)"
          />
        </td>
        <td>
          {{ customer.date }}
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
